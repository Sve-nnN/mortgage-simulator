(node:5168) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
  console.error
    TypeError: Cannot read properties of null (reading '_id')
        at getDashboardStats (C:\Users\Juan\.gemini\antigravity\scratch\mortgage-simulator\backend\controllers\dashboard.controller.js:10:75)
        at Layer.handle [as handle_request] (C:\Users\Juan\.gemini\antigravity\scratch\mortgage-simulator\backend\node_modules\express\lib\router\layer.js:95:5)
        at next (C:\Users\Juan\.gemini\antigravity\scratch\mortgage-simulator\backend\node_modules\express\lib\router\route.js:149:13)
        at protect (C:\Users\Juan\.gemini\antigravity\scratch\mortgage-simulator\backend\middleware\authMiddleware.js:18:13)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)

    [0m [90m 62 |[39m         })[33m;[39m
     [90m 63 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 64 |[39m         console[33m.[39merror(error)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 65 |[39m         res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ message[33m:[39m [32m'Server Error'[39m })[33m;[39m
     [90m 66 |[39m     }
     [90m 67 |[39m }[33m;[39m[0m

      at getDashboardStats (controllers/dashboard.controller.js:64:17)
      at Layer.handle [as handle_request] (node_modules/express/lib/router/layer.js:95:5)
      at next (node_modules/express/lib/router/route.js:149:13)
      at protect (middleware/authMiddleware.js:18:13)

FAIL tests/integration/dashboard.test.js
  Dashboard API
    âˆš should return dashboard stats (64 ms)
    Ã— should return recent simulations (49 ms)

  â— Dashboard API â€º should return recent simulations

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

    [0m [90m 88 |[39m             [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${token}`[39m)[33m;[39m
     [90m 89 |[39m
    [31m[1m>[22m[39m[90m 90 |[39m         expect(res[33m.[39mstatusCode)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m    |[39m                                [31m[1m^[22m[39m
     [90m 91 |[39m         expect(res[33m.[39mbody)[33m.[39mtoHaveProperty([32m'recentSimulations'[39m)[33m;[39m
     [90m 92 |[39m         expect([33mArray[39m[33m.[39misArray(res[33m.[39mbody[33m.[39mrecentSimulations))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 93 |[39m         expect(res[33m.[39mbody[33m.[39mrecentSimulations[33m.[39mlength)[33m.[39mtoBe([35m1[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/dashboard.test.js:90:32)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 passed, 2 total
Snapshots:   0 total
Time:        3.022 s
Ran all test suites matching tests/integration/dashboard.test.js.
